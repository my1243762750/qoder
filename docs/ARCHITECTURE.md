# Mini Jira æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“ æ•´ä½“æ¶æ„

### æŠ€æœ¯æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å®¢æˆ·ç«¯å±‚                          â”‚
â”‚              (Browser / Mobile App)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ HTTP/HTTPS
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Web æœåŠ¡å™¨å±‚                         â”‚
â”‚              Spring Boot (Tomcat)                    â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          å®‰å…¨è¿‡æ»¤é“¾ (Spring Security)       â”‚    â”‚
â”‚  â”‚  JWT Filter â†’ Authentication â†’ Authorizationâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚             æ§åˆ¶å±‚ (Controller)             â”‚    â”‚
â”‚  â”‚  AuthController | ProjectController | ...   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚             ä¸šåŠ¡å±‚ (Service)                â”‚     â”‚
â”‚  â”‚  AuthService | ProjectService | IssueServiceâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚          æ•°æ®è®¿é—®å±‚ (Repository)            â”‚     â”‚
â”‚  â”‚    UserRepo | ProjectRepo | IssueRepo      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ JDBC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ•°æ®åº“å±‚ (MySQL)                      â”‚
â”‚         users | projects | issues                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—ï¸ åˆ†å±‚æ¶æ„

### 1. Controller å±‚ (è¡¨ç°å±‚)
**èŒè´£**ï¼š
- æ¥æ”¶ HTTP è¯·æ±‚
- å‚æ•°éªŒè¯ï¼ˆä½¿ç”¨ `@Valid`ï¼‰
- è°ƒç”¨ Service å±‚
- è¿”å›ç»Ÿä¸€æ ¼å¼å“åº”

**ç¤ºä¾‹**ï¼š
```java
@RestController
@RequestMapping("/api/auth")
public class AuthController {
    @PostMapping("/register")
    public ApiResponse<Void> register(@Valid @RequestBody RegisterRequest request) {
        authService.register(request);
        return ApiResponse.success();
    }
}
```

### 2. Service å±‚ (ä¸šåŠ¡å±‚)
**èŒè´£**ï¼š
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- äº‹åŠ¡ç®¡ç†ï¼ˆ`@Transactional`ï¼‰
- ä¸šåŠ¡æ ¡éªŒ
- DTO ä¸ Entity è½¬æ¢

**ç¤ºä¾‹**ï¼š
```java
@Service
@Transactional
public class AuthService {
    public void register(RegisterRequest request) {
        // 1. ä¸šåŠ¡æ ¡éªŒ
        validateUniqueEmail(request.getEmail());
        
        // 2. å¯†ç åŠ å¯†
        String hashedPassword = passwordEncoder.encode(request.getPassword());
        
        // 3. ä¿å­˜ç”¨æˆ·
        userRepository.save(user);
    }
}
```

### 3. Repository å±‚ (æ•°æ®è®¿é—®å±‚)
**èŒè´£**ï¼š
- æ•°æ®åº“ CRUD æ“ä½œ
- ç»§æ‰¿ `JpaRepository`
- è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•

**ç¤ºä¾‹**ï¼š
```java
public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findByEmail(String email);
    Optional<User> findByUsername(String username);
}
```

### 4. Entity å±‚ (å®ä½“å±‚)
**èŒè´£**ï¼š
- æ•°æ®åº“è¡¨æ˜ å°„
- å®šä¹‰å­—æ®µå’Œå…³è”å…³ç³»
- JPA æ³¨è§£é…ç½®

**ç¤ºä¾‹**ï¼š
```java
@Entity
@Table(name = "users")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(unique = true, nullable = false)
    private String email;
}
```

### 5. DTO å±‚ (æ•°æ®ä¼ è¾“å¯¹è±¡)
**èŒè´£**ï¼š
- è¯·æ±‚/å“åº”æ•°æ®å°è£…
- å‚æ•°éªŒè¯æ³¨è§£
- ä¸ Entity è§£è€¦

**ç¤ºä¾‹**ï¼š
```java
public class RegisterRequest {
    @NotBlank(message = "é‚®ç®±ä¸èƒ½ä¸ºç©º")
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
}
```

## ğŸ” å®‰å…¨æ¶æ„

### JWT è®¤è¯æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚                  â”‚  Server  â”‚                  â”‚ Database â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚                           â”‚                             â”‚
   â”‚ 1. POST /register         â”‚                             â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚
   â”‚                           â”‚ 2. Save user                â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                           â”‚                             â”‚
   â”‚ 3. POST /login            â”‚                             â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚
   â”‚                           â”‚ 4. Verify credentials       â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                           â”‚                             â”‚
   â”‚                           â”‚ 5. Generate JWT             â”‚
   â”‚ 6. Return JWT token       â”‚                             â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
   â”‚                           â”‚                             â”‚
   â”‚ 7. API Request + Token    â”‚                             â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚
   â”‚                           â”‚ 8. Validate Token           â”‚
   â”‚                           â”‚                             â”‚
   â”‚                           â”‚ 9. Process Request          â”‚
   â”‚ 10. Response              â”‚                             â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
```

### è¿‡æ»¤å™¨é“¾

1. **DisableEncodeUrlFilter** - ç¦ç”¨ URL ç¼–ç 
2. **WebAsyncManagerIntegrationFilter** - å¼‚æ­¥è¯·æ±‚é›†æˆ
3. **SecurityContextHolderFilter** - å®‰å…¨ä¸Šä¸‹æ–‡ç®¡ç†
4. **HeaderWriterFilter** - å®‰å…¨å“åº”å¤´
5. **CorsFilter** - è·¨åŸŸå¤„ç†
6. **LogoutFilter** - ç™»å‡ºå¤„ç†
7. **JwtAuthenticationFilter** â­ - JWT éªŒè¯ï¼ˆè‡ªå®šä¹‰ï¼‰
8. **RequestCacheAwareFilter** - è¯·æ±‚ç¼“å­˜
9. **SecurityContextHolderAwareRequestFilter** - å®‰å…¨ä¸Šä¸‹æ–‡åŒ…è£…
10. **AnonymousAuthenticationFilter** - åŒ¿åè®¤è¯
11. **SessionManagementFilter** - ä¼šè¯ç®¡ç†
12. **ExceptionTranslationFilter** - å¼‚å¸¸è½¬æ¢
13. **AuthorizationFilter** - æˆæƒæ£€æŸ¥

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### ER å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      users      â”‚         â”‚     projects     â”‚         â”‚     issues      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚â—„â”€â”€â”€â”    â”‚ id (PK)          â”‚â—„â”€â”€â”€â”    â”‚ id (PK)         â”‚
â”‚ email (UK)      â”‚    â”‚    â”‚ name             â”‚    â”‚    â”‚ title           â”‚
â”‚ username (UK)   â”‚    â””â”€â”€â”€â”€â”¤ owner_id (FK)    â”‚    â””â”€â”€â”€â”€â”¤ project_id (FK) â”‚
â”‚ password_hash   â”‚         â”‚ description      â”‚         â”‚ assignee_id (FK)â”‚
â”‚ role            â”‚         â”‚ created_at       â”‚         â”‚ description     â”‚
â”‚ created_at      â”‚         â”‚ updated_at       â”‚         â”‚ status          â”‚
â”‚ updated_at      â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ priority        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚ created_at      â”‚
                                                         â”‚ updated_at      â”‚
                                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¡¨è¯´æ˜

#### users è¡¨
- å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
- email å’Œ username å”¯ä¸€ç´¢å¼•
- password_hash ä½¿ç”¨ BCrypt åŠ å¯†

#### projects è¡¨
- å­˜å‚¨é¡¹ç›®ä¿¡æ¯
- owner_id å¤–é”®å…³è” users è¡¨

#### issues è¡¨
- å­˜å‚¨ä»»åŠ¡ä¿¡æ¯
- project_id å¤–é”®å…³è” projects è¡¨
- assignee_id å¤–é”®å…³è” users è¡¨ï¼ˆå¯ä¸ºç©ºï¼‰
- status æšä¸¾ï¼šOPEN, IN_PROGRESS, RESOLVED, CLOSED
- priority æšä¸¾ï¼šLOW, MEDIUM, HIGH, CRITICAL

## ğŸ”„ è¯·æ±‚å¤„ç†æµç¨‹

### ç¤ºä¾‹ï¼šåˆ›å»ºé¡¹ç›®

```
1. å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚
   POST /api/projects
   Authorization: Bearer <token>
   Body: { "name": "é¡¹ç›®å", "description": "..." }
   
2. JwtAuthenticationFilter æ‹¦æˆª
   - æå– JWT token
   - éªŒè¯ token æœ‰æ•ˆæ€§
   - ä» token ä¸­è·å–ç”¨æˆ· ID
   - è®¾ç½® SecurityContext
   
3. ProjectController æ¥æ”¶è¯·æ±‚
   - @Valid å‚æ•°éªŒè¯
   - è°ƒç”¨ ProjectService.createProject()
   
4. ProjectService å¤„ç†ä¸šåŠ¡
   - ä» SecurityContext è·å–å½“å‰ç”¨æˆ·
   - åˆ›å»º Project å®ä½“
   - è®¾ç½® owner
   - è°ƒç”¨ Repository ä¿å­˜
   
5. ProjectRepository ä¿å­˜æ•°æ®
   - JPA è‡ªåŠ¨ç”Ÿæˆ SQL
   - æ’å…¥æ•°æ®åº“
   - è¿”å›ä¿å­˜åçš„å®ä½“
   
6. å“åº”è¿”å›
   - Service è¿”å› ProjectResponse DTO
   - Controller åŒ…è£…ä¸º ApiResponse
   - è¿”å› JSON ç»™å®¢æˆ·ç«¯
```

## ğŸ¯ è®¾è®¡æ¨¡å¼

### 1. MVC æ¨¡å¼
- **Model**: Entity + DTO
- **View**: JSON Response
- **Controller**: RestController

### 2. DTO æ¨¡å¼
- è¯·æ±‚/å“åº”ä¸å®ä½“åˆ†ç¦»
- é¿å…æš´éœ²æ•æ„Ÿå­—æ®µ
- çµæ´»çš„æ•°æ®ç»“æ„

### 3. ä¾èµ–æ³¨å…¥ (DI)
- æ„é€ å™¨æ³¨å…¥ï¼ˆæ¨èï¼‰
- æ¾è€¦åˆè®¾è®¡
- ä¾¿äºæµ‹è¯•

### 4. Repository æ¨¡å¼
- ç»Ÿä¸€æ•°æ®è®¿é—®æ¥å£
- å±è”½åº•å±‚å®ç°ç»†èŠ‚

### 5. Filter Chain æ¨¡å¼
- Spring Security è¿‡æ»¤å™¨é“¾
- èŒè´£åˆ†ç¦»
- å¯æ‰©å±•

## ğŸ“ˆ æœªæ¥æ‰©å±• (Stage 2-4)

### Stage 2: åŠŸèƒ½å¢å¼º
- åˆ†é¡µæŸ¥è¯¢
- æƒé™æ§åˆ¶ï¼ˆRBACï¼‰
- æ–‡ä»¶ä¸Šä¼ 

### Stage 3: æ€§èƒ½ä¼˜åŒ–
- Redis ç¼“å­˜
- RabbitMQ å¼‚æ­¥å¤„ç†
- ç›‘æ§å‘Šè­¦

### Stage 4: åˆ†å¸ƒå¼
- å¾®æœåŠ¡æ‹†åˆ†
- æœåŠ¡æ³¨å†Œä¸å‘ç°
- é…ç½®ä¸­å¿ƒ

## ğŸ›¡ï¸ æœ€ä½³å®è·µ

1. **åˆ†å±‚æ¸…æ™°**ï¼šæ¯å±‚èŒè´£æ˜ç¡®ï¼Œä¸è·¨å±‚è°ƒç”¨
2. **å¼‚å¸¸å¤„ç†**ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼Œå‹å¥½é”™è¯¯æç¤º
3. **å‚æ•°éªŒè¯**ï¼šä½¿ç”¨ Bean Validation
4. **äº‹åŠ¡ç®¡ç†**ï¼šService å±‚ä½¿ç”¨ @Transactional
5. **æ—¥å¿—è®°å½•**ï¼šå…³é”®æ“ä½œè®°å½•æ—¥å¿—
6. **å®‰å…¨é˜²æŠ¤**ï¼šJWT + HTTPS + å‚æ•°æ ¡éªŒ
7. **ä»£ç å¤ç”¨**ï¼šæå–å…¬å…±æ–¹æ³•å’Œå·¥å…·ç±»

---

**æ›´æ–°æ—¶é—´**: 2026-01-22  
**ç‰ˆæœ¬**: v0.1.0
